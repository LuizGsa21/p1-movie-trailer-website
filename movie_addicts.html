<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Movie Addicts</title>

    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
body {
    padding: 50px 0;
}

.tile-container {
    text-align: center;
    padding-top: 2em;
}

.tile-container h2 {
    margin: 0 0 0.5em;
}

.tile-container:hover {
    cursor: default;
}

.tile-cover {
    display: block;
    margin: 0 auto;
    width: auto;
    max-height: 250px;
}

.btn-group.center-buttons {
    position: absolute;
    left: 75%;
    transform: translate(-50%, -50%);
    top: 50%;
}

.cover-container {
    display: inline-block;
    width: 100%;
    text-align: center;
}

.tile-container:hover {
    background-color: #EEE;
    cursor: default;
}

.tile-cover {
    background-color: #EEE;
    cursor: zoom-in;
}

.rating {
    display: inline-block;
    margin: 1em 0;
}

.rating img {
    height: 1.5em;
}

.option-buttons {
    margin: 1em;
}

.btn:focus {
    outline: none;
}

.hanging-close {
    position: absolute;
    z-index: 999;
    right: -12px;
    top: -12px;
}

/** Movie Info Modal **/
#modal-movie-info p {
    margin-bottom: 1em;
}

#modal-movie-info img {
    max-height: 200px;
    width: auto;
}

#modal-movie-info h2 {
    margin-top: 0;
    padding-bottom: 0.5em;
    border-bottom: 1px solid gray;
}

#modal-movie-info .modal-content {
    padding: 1em;
    overflow: hidden;
}

.description:before {
    content: 'Description: \A';
    font-weight: bold;
    white-space: pre;
}

.duration:before {
    content: 'Duration: ';
    font-weight: bold;
}

.genre:before {
    content: 'Genre: ';
    font-weight: bold;
}

.rated {
    display: none;
}

.rated:before {
    content: 'Rated: ';
    font-weight: bold;
}

/* ./Movie Info Modal */

/** Movie cover popup **/
#modal-movie-cover .modal-content {
    background: transparent;
    overflow: hidden;
}


body > .cover {
    /* Used for calculating cover width in modal */
    max-width: 85%;
}

#modal-movie-cover .modal-dialog {
    margin: 0 auto;
}
/* ./Movie cover popup */

/* Mobile devices */
@media screen
and (max-width: 768px) {

    h2 {
        font-size: 2em;
    }

    .tile-cover {
        max-height: 200px;
    }

    .btn {
        font-size: 0.9em;
    }

}

@media screen
and (max-width: 480px) {

    #modal-movie-info .cover-container {
        display: none;
    }

    #modal-movie-info .col-xs-6 {
        width: 100%;
    }

    .rated {
        display: block !important;
    }
}</style>
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Movie Addicts</a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#">Home</a></li>
            </ul>
        </div>
        <!--/.nav-collapse -->
    </div>
</div>

<div class="container">
<div class="tile-container col-sm-6 col-md-4">
    <h2>The Imitation Game</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BNDkwNTEyMzkzNl5BMl5BanBnXkFtZTgwNTAwNzk3MjE@._V1__SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="5"></div>
    <div class="option-buttons" data-trailer-youtube-id="S5CjKEFb-sM">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">During World War II, mathematician Alan Turing tries to crack the enigma code with help from fellow mathematicians.</div>
        <div class="genre">Thriller | Drama | Biography</div>
        <div class="duration">114 min</div>
        <div class="movie-rating">PG-13</div>
    </div>
</div>

<div class="tile-container col-sm-6 col-md-4">
    <h2>The Dark Knight</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="4.5"></div>
    <div class="option-buttons" data-trailer-youtube-id="EXeTwQWrcwY">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, the caped crusader must come to terms with one of the greatest psychological tests of his ability to fight injustice.</div>
        <div class="genre">Action | Crime | Drama</div>
        <div class="duration">152 min</div>
        <div class="movie-rating">PG-13</div>
    </div>
</div>
<div class="clearfix  visible-sm-block "></div>
<div class="tile-container col-sm-6 col-md-4">
    <h2>Inception</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="4"></div>
    <div class="option-buttons" data-trailer-youtube-id="66TuSJo4dZM">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">A thief who steals corporate secrets through use of dream-sharing technology is given the inverse task of planting an idea into the mind of a CEO.</div>
        <div class="genre">Action | Mystery | Sci-Fi</div>
        <div class="duration">148min</div>
        <div class="movie-rating">PG-13</div>
    </div>
</div>
<div class="clearfix  visible-md-block  visible-lg-block "></div>
<div class="tile-container col-sm-6 col-md-4">
    <h2>The Matrix</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMTkxNDYxOTA4M15BMl5BanBnXkFtZTgwNTk0NzQxMTE@._V1__SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="4"></div>
    <div class="option-buttons" data-trailer-youtube-id="c3sBBRxDAqk">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">A computer hacker learns from mysterious rebels about the true nature of his reality and his role in the war against its controllers.</div>
        <div class="genre">Action | Sci-Fi</div>
        <div class="duration">136min</div>
        <div class="movie-rating">R</div>
    </div>
</div>
<div class="clearfix  visible-sm-block "></div>
<div class="tile-container col-sm-6 col-md-4">
    <h2>Transformers: Age of Extinction</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMjEwNTg1MTA5Nl5BMl5BanBnXkFtZTgwOTg2OTM4MTE@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="3.25"></div>
    <div class="option-buttons" data-trailer-youtube-id="c3sBBRxDAqk">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">Autobots must escape sight from a bounty hunter who takes control of the human serendipity: Unexpectedly, Optimus Prime and his remaining gang turn to a mechanic and his daughter for help.</div>
        <div class="genre">Action | Adventure | Sci-Fi</div>
        <div class="duration">165min</div>
        <div class="movie-rating">PG-13</div>
    </div>
</div>

<div class="tile-container col-sm-6 col-md-4">
    <h2>The Avengers</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMTk2NTI1MTU4N15BMl5BanBnXkFtZTcwODg0OTY0Nw@@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="4.5"></div>
    <div class="option-buttons" data-trailer-youtube-id="FAfR8omt-CY">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">Earth's mightiest heroes must come together and learn to fight as a team if they are to stop the mischievous Loki and his alien army from enslaving humanity.</div>
        <div class="genre">Action | Adventure | Sci-Fi</div>
        <div class="duration">143min</div>
        <div class="movie-rating">PG-13</div>
    </div>
</div>
<div class="clearfix  visible-sm-block  visible-md-block  visible-lg-block "></div>
<div class="tile-container col-sm-6 col-md-4">
    <h2>WALL-E</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMTczOTA3MzY2N15BMl5BanBnXkFtZTcwOTYwNjE2MQ@@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="4.5"></div>
    <div class="option-buttons" data-trailer-youtube-id="FAfR8omt-CY">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">In the distant future, a small waste collecting robot inadvertently embarks on a space journey that will ultimately decide the fate of mankind.</div>
        <div class="genre">Animation | Adventure | Romance</div>
        <div class="duration">98min</div>
        <div class="movie-rating">G</div>
    </div>
</div>

<div class="tile-container col-sm-6 col-md-4">
    <h2>X-Men: Days of Future Past</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMjEwMDk2NzY4MF5BMl5BanBnXkFtZTgwNTY2OTcwMDE@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="5"></div>
    <div class="option-buttons" data-trailer-youtube-id="FAfR8omt-CY">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">The X-Men send Wolverine to the past in a desperate effort to change history and prevent an event that results in doom for both humans and mutants.</div>
        <div class="genre">Action | Adventure | Sci-Fi</div>
        <div class="duration">131min</div>
        <div class="movie-rating">PG-13</div>
    </div>
</div>
<div class="clearfix  visible-sm-block "></div>
<div class="tile-container col-sm-6 col-md-4">
    <h2>Interstellar</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMjIxNTU4MzY4MF5BMl5BanBnXkFtZTgwMzM4ODI3MjE@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="5"></div>
    <div class="option-buttons" data-trailer-youtube-id="FAfR8omt-CY">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">A team of explorers travel through a wormhole in an attempt to ensure humanity's survival.</div>
        <div class="genre">Adventure | Sci-Fi</div>
        <div class="duration">169min</div>
        <div class="movie-rating">PG-13</div>
    </div>
</div>
<div class="clearfix  visible-md-block  visible-lg-block "></div>
<div class="tile-container col-sm-6 col-md-4">
    <h2>Big Hero 6</h2>
    <img class="tile-cover" src="http://ia.media-imdb.com/images/M/MV5BMjI4MTIzODU2NV5BMl5BanBnXkFtZTgwMjE0NDAwMjE@._V1_SX640_SY720_.jpg" width="220" height="342">

    <div class="rating" data-score="4"></div>
    <div class="option-buttons" data-trailer-youtube-id="PbA63a7H0bo">
        <button class="play-trailer btn btn-danger">Watch Trailer</button>
        <button class="more-info btn btn-primary">More Info</button>
    </div>
    <div class="hidden">
        <div class="description">The special bond that develops between plus-sized inflatable robot Baymax, and prodigy Hiro Hamada, who team up with a group of friends to form a band of high-tech heroes.</div>
        <div class="genre">Animation | Action | Adventure</div>
        <div class="duration">102min</div>
        <div class="movie-rating">PG</div>
    </div>
</div>
<div class="clearfix  visible-sm-block "></div>
</div> <!-- ./container -->

<!-- Trailer Video Modal -->
<div class="modal fade" id="modal-trailer">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal close button -->
            <a href="#" class="hanging-close" data-dismiss="modal" aria-hidden="true"><img src="images/close-button.png"></a>
            <!-- 16:9 aspect ratio -->
            <div id="trailer-container" class="embed-responsive embed-responsive-16by9">
            </div>
        </div>
    </div>
</div>

<!-- Movie Info Modal -->
<div class="modal fade" id="modal-movie-info">
    <div class="modal-dialog">
        <div class="modal-content">
            <h2 class="text-center"></h2>
            <div class="row">
                <div class="col-xs-6">
                    <div class="cover-container">
                        <img class="cover" src="">
                        <div class="clearfix"></div>
                        <div class="rating" data-score=""></div>
                        <p class="movie-rating"></p>
                    </div>
                </div>
                <div class="col-xs-6">
                    <p class="duration"></p>
                    <p class="genre"></p>
                    <p class="movie-rating rated"></p>
                    <p class="description"></p>
                </div>
            </div>
            <div class="btn-group pull-right">
                <button class="play-trailer btn btn-danger">Watch Trailer</button>
                <!-- Modal close button -->
                <button class="btn btn-primary" data-dismiss="modal" data-target="#modal-movie-info">Back</button>
            </div>
        </div>
    </div>
</div>

<div id="modal-movie-cover" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <!-- Modal close button -->
        <a href="#" class="hanging-close" data-dismiss="modal" aria-hidden="true"><img src="images/close-button.png"></a>
        <div class="modal-content">
            <img src="" class="cover img-responsive">
        </div>
    </div>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="vendor/js/jquery.raty.js"></script>
<script>
/**
 * Created by Luiz Arantes Sa on 2/15/15.
 */

$(function() {
    'use strict';

    /**
     * Creates a movie object from the given movie tile
     * @param movieTile {HTMLHtmlElement} movie tile
     * @constructor
     */
    var Movie = function (movieTile) {
        this.title = movieTile.find('h2').html();
        this.description = movieTile.find('.description').html();
        this.genre = movieTile.find('.genre').html();
        this.duration = movieTile.find('.duration').html();
        this.rating = movieTile.find('.rating').html();
        this.movieRating = movieTile.find('.movie-rating').html();
        this.src = movieTile.find('.tile-cover').attr('src');
        this.youtubeId = movieTile.find('.option-buttons').attr('data-trailer-youtube-id');
    };

    /**
     * Appends the given movie to `#modal-movie-info`
     * @param movie {Movie}
     */
    var appendToModalMovieInfo = function (movie) {
        var infoModal = $('#modal-movie-info');
        infoModal.data('movie', movie);
        infoModal.find('h2').html(movie.title);
        infoModal.find('.description').html(movie.description);
        infoModal.find('.genre').html(movie.genre);
        infoModal.find('.duration').html(movie.duration);
        infoModal.find('.rating').html(movie.rating);
        infoModal.find('.movie-rating').html(movie.movieRating);
        infoModal.find('.cover').attr('src',movie.src);
        infoModal.find('.play-trailer').attr('data-trailer-youtube-id',movie.youtubeId);
    };

    /**
     * Centers modal on page.
     * Snippet taken from: http://www.minimit.com/demos/vertical-center-bootstrap-3-modals
     */
    var centerModals = function () {
        $('.modal').each(function () {
            var $clone = $(this).clone().css('display', 'block').appendTo('body');
            var top = Math.round(($clone.height() - $clone.find('.modal-content').height()) / 2);
            top = top > 0 ? top : 0;
            $clone.remove();
            $(this).find('.modal-content').css("margin-top", top);
        });
    };

    /**
     * Displays a youtube video from the given youtube id.
     * @param youtubeId - Video ID used to embed youtube video
     */
    var showTrailer = function (youtubeId) {
        var sourceUrl = 'http://www.youtube.com/embed/' + youtubeId + '?autoplay=1&html5=1';
        $('#trailer-container').empty().append($("<iframe></iframe>", {
            'id': 'trailer-video',
            'type': 'text-html',
            'src': sourceUrl,
            'allowfullscreen': 'true',
            'frameborder': 0
        }));
        $('#modal-trailer').modal('show');
    };



    // Assure the modal is center on page by calling `centerModals()`
    // on window resize and when a modal shown.
    $('.modal').on('show.bs.modal', centerModals);
    $(window).on('resize', centerModals);

    // Remove the src so the player itself gets removed, as this is the only
    // reliable way to ensure the video stops playing in IE
    $('#modal-trailer').on('hide.bs.modal', function () {
        $("#trailer-container").empty();
    });

    // Set a listener for when the user clicks
    // on the "more info" button.
    $('.more-info').click(function () {
        // Get the movie tile from the clicked button
        var movieTile = $(this).parent().parent();
        // Create a movie object and properly attach it to `#modal-movie-info`
        var movie = new Movie(movieTile);
        appendToModalMovieInfo(movie);

        // Display movie info
        $('#modal-movie-info').modal('show');

    });

    var tiles = $('.tile-container');

    // Animate in the movies when the page loads
    //tiles.hide().first().show("fast", function showNext() {
    //    $(this).next("div").show("fast", showNext);
    //});

    // Play trailer when users clicks "play trailer"
    // button that is INSIDE a movie tile.
    tiles.find('.play-trailer').on('click', function () {
        var youtubeId = $(this).parent().attr('data-trailer-youtube-id');
        showTrailer(youtubeId);
    });

    // Play trailer when user clicks "play trailer"
    // button that is INSIDE `#modal-movie-info`
    $('#modal-movie-info').find('.play-trailer').click(function () {
        var infoModal = $('#modal-movie-info');
        infoModal.modal('hide');
        var movie = infoModal.data('movie');
        showTrailer(movie.youtubeId);
    });

    // Popup the movie cover in a modal when clicked.
    tiles.find('img').on('click', function () {
        var modalMovieCover = $('#modal-movie-cover');

        // Get the image from the tile and append it to the modal
        var image = $(modalMovieCover.find('.cover'));
        image.attr('src', $(this).attr('src'));

        // Create a copy of the image and append it to body to calculate picture width
        var clone = image.clone().css('display', 'block').appendTo('body');
        // Set the modal's width equal to the image
        modalMovieCover.find('.modal-dialog').css('width', clone.width());
        clone.remove(); // Remove the cloned image
        modalMovieCover.modal('show');
    });

    $('.rating').raty({
        readOnly: true,
        noRatedMsg : "This movie has no rating!",
        hints: ["Don't bother watching it...", 'Almost decent', 'Decent', 'Pretty good', 'Must watch!'],
        score: function() {
            return $(this).attr('data-score');
        }
    });
    $('#photo-container .photo img').attr('src');

});
</script>
</body>
</html>
